<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Frecuencia Central</title>
</head>
<body>
<h1>Frecuencia Central - Chat y Voz</h1>

<textarea id="textInput" rows="4" cols="50" placeholder="Escribe tu mensaje aquí"></textarea><br>
<button id="speakBtn">Hablar</button>

<select id="voiceSelect"></select>

<script>
const textInput = document.getElementById('textInput');
const speakBtn = document.getElementById('speakBtn');
const voiceSelect = document.getElementById('voiceSelect');

let voices = [];

function populateVoices(){
  voices = speechSynthesis.getVoices();
  voiceSelect.innerHTML = '';
  voices.forEach(v=>{
    const opt = document.createElement('option');
    opt.value = v.name;
    opt.textContent = `${v.name} (${v.lang})`;
    voiceSelect.appendChild(opt);
  });
}

speechSynthesis.onvoiceschanged = populateVoices;
populateVoices();

speakBtn.onclick = () => {
  const text = textInput.value.trim();
  if(!text) return;

  // Detección simple de idioma
  const lang = /^[A-Za-zÀ-ÖØ-öø-ÿ]+$/.test(text) ? 'en-US' : 'es-ES';

  const utter = new SpeechSynthesisUtterance(text);
  utter.voice = voices.find(v=>v.name===voiceSelect.value) || voices[0];
  utter.lang = lang;
  utter.rate = 1;
  utter.pitch = 1;
  speechSynthesis.speak(utter);
};
</script>
</body>
</html>
